<div class="products-page__filters">
  <div class="products-page__filters-header">
    <h2>Product Filters</h2>
    <div class="form__buttons">
      <% if (user && user.status === "admin") { %>
        <button class="button--icon" onclick="location.href='/forms/new-product'">
          <span class="material-symbols-outlined">
            note_stack_add
          </span>
        </button>
      <% } %>
      <button class="filters-toggle button--icon" onclick="toggleFilters()">
        <span class="material-symbols-outlined">
          keyboard_double_arrow_down
        </span>
      </button>
    </div>
  </div>

  <form action="/products" method="GET" class="products-page__form">
    <div class="products-page__filter-section">
      <% if (brands.length > 0) { %>
        <h3>Brands:</h3>
        <% brands.forEach(brand => { %>
          <label>
            <input 
              type="checkbox" 
              name="brand" 
              value="<%= brand.name %>" 
              <%= filters && filters.brands && filters.brands.includes(brand.name) ? 'checked' : '' %>
            />
            <%= brand.name %>
          </label>
        <% }) %>
      <% } else { %>
        <p>No brands available.</p>
      <% } %>
    </div>

    <div class="products-page__filter-section">
      <% if (categories.length > 0) { %>
        <h3>Categories:</h3>
        <% categories.forEach(category => { %>
          <label>
            <input 
              type="checkbox" 
              name="category" 
              value="<%= category.name %>" 
              <%= filters && filters.categories && filters.categories.includes(category.name) ? 'checked' : '' %>
            />
            <%= category.name %>
          </label>
        <% }) %>
      <% } else { %>
        <p>No categories available.</p>
      <% } %>
    </div>

    <div class="products-page__filter-section">
      <% if (categories.length > 0) { %>
        <h3>Skin Types:</h3>
        <% skintypes.forEach(skintype => { %>
          <label>
            <input 
              type="checkbox" 
              name="skintype" 
              value="<%= skintype.name %>" 
              <%= filters && filters.skintypes && filters.skintypes.includes(skintype.name) ? 'checked' : '' %>
            />
            <%= skintype.name %>
          </label>
        <% }) %>
      <% } else { %>
        <p>No categories available.</p>
      <% } %>
    </div>

    <button type="submit">Apply Filters</button>
  </form>
</div>